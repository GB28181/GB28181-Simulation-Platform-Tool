<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory">Chapter 6. Enterprise Monitoring and Management</title><link rel="stylesheet" href="css/jbossorg.css" type="text/css"/><meta xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" name="generator" content="DocBook XSL Stylesheets V1.74.0"/><link rel="home" href="index.html" title="SIP Servlets Server User Guide"/><link rel="up" href="index.html" title="SIP Servlets Server User Guide"/><link rel="prev" href="ch05.html" title="Chapter 5. Clustering and High Availability"/><link rel="next" href="afotsss-Advanced_Features_of_the_SIP_Servlets_Server.html" title="Chapter 7. Advanced Features of the SIP Servlets Server"/></head><body><p id="title"><a href="http://www.jboss.org" class="site_href"><strong>JBoss.org</strong></a><a href="http://docs.jboss.org/" class="doc_href"><strong>Community Documentation</strong></a></p><ul class="docnav"><li class="previous"><a accesskey="p" href="ch05.html"><strong>Prev</strong></a></li><li class="next"><a accesskey="n" href="afotsss-Advanced_Features_of_the_SIP_Servlets_Server.html"><strong>Next</strong></a></li></ul><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="emom-Enterprise-Monitoring-Operations-Management"/>Chapter 6. Enterprise Monitoring and Management</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="emom-Enterprise-Monitoring-Operations-Management.html#d0e6585">6.1. Mobicents SIP Servlets Monitoring and Management</a></span></dt><dd><dl><dt><span class="section"><a href="emom-Enterprise-Monitoring-Operations-Management.html#d0e6592">6.1.1. Installation of the Enterprise Monitoring and Management Console</a></span></dt><dt><span class="section"><a href="emom-Enterprise-Monitoring-Operations-Management.html#d0e6636">6.1.2. Usage Instructions</a></span></dt></dl></dd><dt><span class="section"><a href="emom-Enterprise-Monitoring-Operations-Management.html#d0e6848">6.2. SIP Load Balancer Monitoring and Management</a></span></dt><dd><dl><dt><span class="section"><a href="emom-Enterprise-Monitoring-Operations-Management.html#d0e6856">6.2.1. Installation of the Enterprise Monitoring and Management Console</a></span></dt><dt><span class="section"><a href="emom-Enterprise-Monitoring-Operations-Management.html#d0e6888">6.2.2. Usage Instructions</a></span></dt></dl></dd></dl></div><p>Jopr is an enterprise management solution for JBoss middleware
  projects and other application technologies. This pluggable project provides
  administration, monitoring, alerting, operational control and configuration
  in an enterprise setting with fine-grained security and an advanced
  extension model.</p><p>It provides support for monitoring base operating system information
  on six operating systems as well as management of Apache, JBoss Application
  Server (JBoss AS) and other related projects. See the <a class="ulink" href="http://www.jboss.org/jopr">Jopr website</a> for more information or
  see the <a class="ulink" href="http://www.jboss.org/embjopr">Jopr embedded website</a></p><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e6585"/>6.1. Mobicents SIP Servlets Monitoring and Management</h2></div></div></div><p>This chapter provides information on how to enable the management of
    Mobicents SIP Servlets Servers through Jopr with our custom Jopr plug in.
    Two versions of Jopr are available: an  embedded version, which is 
    better suited to development environments; and a full version, which is better suited to
    production environments.</p><p>The Mobicents SIP Servlet Jopr plug in provides a facility to view
    metrics related to the deployed applications, metrics related to the SIP
    Servlets Server.  Additionally, the plugin provides the option to manage the various configuration settings of the
    SIP Servlets Server such as Congestion and Concurrency control.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e6592"/>6.1.1. Installation of the Enterprise Monitoring and Management Console</h3></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e6595"/>6.1.1.1. Jopr for Development</h4></div></div></div><p>The Embedded Jopr (also known as the  JBoss Administration Console) is
         pre-installed as an application deployed in the Mobicents SIP
        Servlets Server.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="d0e6600"/>6.1.1.2. Jopr for Production</h4></div></div></div><div class="itemizedlist"><ul><li><p>Follow the <a class="ulink" href="http://jboss.org/community/docs/DOC-12828">Jopr installation instructions</a> to install the latest version of Jopr.</p></li><li><p>Stop the Jopr server and agent if they are running.</p></li><li><p>Get the Mobicents SIP Servlets Jopr Plug in from here :
            <a class="ulink" href="http://repository.jboss.com/maven2/org/mobicents/servlet/sip/jopr-mobicents-sip-servlets-plugin/1.3/jopr-mobicents-sip-servlets-plugin-1.3.jar">http://repository.jboss.com/maven2/org/mobicents/servlet/sip/jopr-mobicents-sip-servlets-plugin/1.3/jopr-mobicents-sip-servlets-plugin-1.3.jar</a></p></li><li><p>Copy the jopr-mobicents-sip-servlets-plugin-1.3.jar just
            downloaded to the
            <code class="filename">jopr-server/jbossas/server/default/deploy/rhq.ear/rhq-downloads/rhq-plugins/</code>
            directory</p></li><li><p>Start the Jopr server then the agent.</p></li><li><p>Start the  Mobicents SIP Servlets Server on JBoss, and ensure the binding address is specified </p><p>
            <strong class="userinput"><code>sh run.sh -b 192.168.0.10</code></strong> (the Server will
            not get recognized on localhost)</p></li></ul></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e6636"/>6.1.2. Usage Instructions</h3></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="emom-Embedded-Jopr"/>6.1.2.1. Jopr for Development</h4></div></div></div><div class="itemizedlist"><ul><li><p>Log in to the Jopr console on <a class="ulink" href="http://localhost:8080/admin-console">http://localhost:8080/admin-console</a>
            and login as admin (user=admin, password=admin).</p></li><li><p>From the tree on the left side of the screen, under Services
            , click on <span class="guimenuitem"><strong>MobicentsSipServlets</strong></span> link, then click on the
            <span class="guimenuitem"><strong>jboss.web:type=SipApplicationDispatcher</strong></span> link to view the incoming metrics.</p><div class="figure"><a id="d0e6660"/><div class="figure-contents"><div class="mediaobject"><img src="images/mss-embjopr-home.png" alt="Mobicents SIP Servlets Server Metrics"/></div></div><p class="title"><b>Figure 6.1. Mobicents SIP Servlets Server Metrics</b></p></div><br class="figure-break"/></li><li><p>Click on the Configuration Tab to  tune the
            Congestion Controls parameters as defined in <a class="xref" href="afotsss-Advanced_Features_of_the_SIP_Servlets_Server.html#sscacc-MSS_Concurrency_and_Congestion_Control" title="7.2. Concurrency and Congestion Control">Section 7.2, “Concurrency and Congestion Control”</a></p><div class="figure"><a id="d0e6670"/><div class="figure-contents"><div class="mediaobject"><img src="images/mss-embjopr-config.png" alt="SIP Application Dispatcher Congestion Control Parameters Configuration"/></div></div><p class="title"><b>Figure 6.2. SIP Application Dispatcher Congestion Control Parameters Configuration</b></p></div><br class="figure-break"/></li><li><p>Click on the <span class="guilabel"><strong>Control Tab</strong></span> to  set the Concurrency
            Control Mode and Congestion Control Policy as defined in <a class="xref" href="afotsss-Advanced_Features_of_the_SIP_Servlets_Server.html#sscacc-MSS_Concurrency_and_Congestion_Control" title="7.2. Concurrency and Congestion Control">Section 7.2, “Concurrency and Congestion Control”</a></p><div class="figure"><a id="d0e6683"/><div class="figure-contents"><div class="mediaobject"><img src="images/mss-embjopr-control.png" alt="SIP Application Dispatcher Congestion Control Parameters Configuration"/></div></div><p class="title"><b>Figure 6.3. SIP Application Dispatcher Congestion Control Parameters Configuration</b></p></div><br class="figure-break"/></li><li><p>To begin metrics collection, and see them on the monitoring
            application, you must use an example application (such as
            location service) so that the SIP Servlets Server processes SIP
            Messages.</p><div class="figure"><a id="d0e6692"/><div class="figure-contents"><div class="mediaobject"><img src="images/mss-embjopr-metrics.png" alt="Selected Application Metrics"/></div></div><p class="title"><b>Figure 6.4. Selected Application Metrics</b></p></div><br class="figure-break"/></li><li><p>To see metrics for the  application, click on the 
            application under the Converged SIP/Web Application (SAR/WAR)
            link.</p><div class="figure"><a id="d0e6701"/><div class="figure-contents"><div class="mediaobject"><img src="images/mss-jopr-applications.png" alt="Specific Application Metrics"/></div></div><p class="title"><b>Figure 6.5. Specific Application Metrics</b></p></div><br class="figure-break"/></li><li><p>Select the <span class="guilabel"><strong>Metrics</strong></span> tab to actually see the metrics for the  application.</p><div class="figure"><a id="d0e6713"/><div class="figure-contents"><div class="mediaobject"><img src="images/mss-embjopr-session-metrics.png" alt="Specific Application Metrics Detail"/></div></div><p class="title"><b>Figure 6.6. Specific Application Metrics Detail</b></p></div><br class="figure-break"/></li></ul></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="emom-Jopr4Production"/>6.1.2.2. Jopr For Production</h4></div></div></div><div class="itemizedlist"><ul><li><p>Log in to the Jopr console on <a class="ulink" href="http://localhost:7080/">http://localhost:7080</a> </p><p>From the <span class="guilabel"><strong>Dashboard</strong></span> tab, in the Auto Discovery portlet, import your
            server (for example, deruelle-laptop JBossAS 4.2.3.GA default
            (192.168.0.12:1099)) from under localhost.</p><div class="figure"><a id="d0e6735"/><div class="figure-contents"><div class="mediaobject"><img src="images/mss-jopr-auto-disc.png" alt="Server Import for Monitoring"/></div></div><p class="title"><b>Figure 6.7. Server Import for Monitoring</b></p></div><br class="figure-break"/></li><li><p>From the Dashboard, in the Recently Added Resources
            portlet, click on the server.</p><div class="figure"><a id="d0e6744"/><div class="figure-contents"><div class="mediaobject"><img src="images/mss-jopr-resources.png" alt="Selecting the Server for Monitoring"/></div></div><p class="title"><b>Figure 6.8. Selecting the Server for Monitoring</b></p></div><br class="figure-break"/></li><li><p>On the new Monitor view click on the JBossWeb Server
            link.</p><div class="figure"><a id="d0e6753"/><div class="figure-contents"><div class="mediaobject"><img src="images/mss-jopr-monitor.png" alt="Servlet Container Monitoring"/></div></div><p class="title"><b>Figure 6.9. Servlet Container Monitoring</b></p></div><br class="figure-break"/></li><li><p>Click on the <span class="guimenuitem"><strong>jboss.web:type=SipApplicationDispatcher</strong></span> link to view the incoming metrics.</p><div class="figure"><a id="d0e6765"/><div class="figure-contents"><div class="mediaobject"><img src="images/mss-jopr-jboss-web.png" alt="Mobicents SIP Servlets Server Metrics"/></div></div><p class="title"><b>Figure 6.10. Mobicents SIP Servlets Server Metrics</b></p></div><br class="figure-break"/></li><li><p>Click on the <span class="guilabel"><strong>Configuration</strong></span> tab to  tune the
            Container configuration parameters such as Concurrency and Congestion as defined in <a class="xref" href="afotsss-Advanced_Features_of_the_SIP_Servlets_Server.html#sscacc-MSS_Concurrency_and_Congestion_Control" title="7.2. Concurrency and Congestion Control">Section 7.2, “Concurrency and Congestion Control”</a></p><div class="figure"><a id="d0e6778"/><div class="figure-contents"><div class="mediaobject"><img src="images/mss-jopr-queue.png" alt="SIP Application Dispatcher Configuration"/></div></div><p class="title"><b>Figure 6.11. SIP Application Dispatcher Configuration</b></p></div><br class="figure-break"/></li><li><p>Click on the Control Tab to be able to set the Concurrency
            Control Mode and Congestion Control Policy as defined in <a class="xref" href="afotsss-Advanced_Features_of_the_SIP_Servlets_Server.html#sscacc-MSS_Concurrency_and_Congestion_Control" title="7.2. Concurrency and Congestion Control">Section 7.2, “Concurrency and Congestion Control”</a></p><div class="figure"><a id="d0e6788"/><div class="figure-contents"><div class="mediaobject"><img src="images/mss-jopr-concurrency.png" alt="SIP Application Dispatcher Congestion Control Parameters Configuration"/></div></div><p class="title"><b>Figure 6.12. SIP Application Dispatcher Congestion Control Parameters Configuration</b></p></div><br class="figure-break"/></li><li><p>To begin metrics collection, and see them on the monitoring
            application, you must use an example application (such as
            location service) so that the SIP Servlets Server processes SIP
            Messages.</p><div class="figure"><a id="d0e6797"/><div class="figure-contents"><div class="mediaobject"><img src="images/mss-jopr-metrics.png" alt="Selected Application Metrics"/></div></div><p class="title"><b>Figure 6.13. Selected Application Metrics</b></p></div><br class="figure-break"/></li><li><p>To see Metrics about your application, click on the
            Converged SIP/Web Application (SAR/WAR) link.</p><div class="figure"><a id="d0e6806"/><div class="figure-contents"><div class="mediaobject"><img src="images/mss-jopr-sip-apps.png" alt="Specific Application Metrics"/></div></div><p class="title"><b>Figure 6.14. Specific Application Metrics</b></p></div><br class="figure-break"/></li><li><p>Click on the application to actually see the metrics for the application.</p><div class="figure"><a id="d0e6815"/><div class="figure-contents"><div class="mediaobject"><img src="images/mss-jopr-applications.png" alt="Specific Application Metrics Detail"/></div></div><p class="title"><b>Figure 6.15. Specific Application Metrics Detail</b></p></div><br class="figure-break"/></li><li><p>Click on the <span class="guilabel"><strong>Configure</strong></span> link for the <span class="guilabel"><strong>Monitor</strong></span>
            tab to select the metric data to view.</p><div class="figure"><a id="d0e6830"/><div class="figure-contents"><div class="mediaobject"><img src="images/mss-jopr-configure-metrics.png" alt="Selecting Application Metrics"/></div></div><p class="title"><b>Figure 6.16. Selecting Application Metrics</b></p></div><br class="figure-break"/></li><li><p>Select the <span class="guilabel"><strong>MetaData</strong></span> tab to  see the metrics
            of your application.</p><div class="figure"><a id="d0e6842"/><div class="figure-contents"><div class="mediaobject"><img src="images/mss-jopr-session-metrics.png" alt="Selected Application Metrics Detail"/></div></div><p class="title"><b>Figure 6.17. Selected Application Metrics Detail</b></p></div><br class="figure-break"/></li></ul></div></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e6848"/>6.2. SIP Load Balancer Monitoring and Management</h2></div></div></div><p>This documentation provides information on how to enable the
    management of Mobicents SIP Load Balancer through Jopr with our custom SIP
    Load Balancer Jopr plug in.</p><p>With the Mobicents SIP Load Balancer Jopr plug in, you can currently
    see metrics, configure and manage the Mobicents SIP Load Balancer.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e6856"/>6.2.1. Installation of the Enterprise Monitoring and Management Console</h3></div></div></div><div class="itemizedlist"><ul><li><p>Follow the <a class="ulink" href="http://jboss.org/community/docs/DOC-12828">Jopr installation instructions</a> to install the latest version of Jopr.</p></li><li><p>Stop the Jopr server and agent if they are running.</p></li><li><p>Get the Mobicents SIP Load Balancer Jopr Plug in from JBoss
          maven repository at <a class="ulink" href="http://repository.jboss.org/maven2/org/mobicents/tools/sip-balancer-jopr-plugin/1.0/sip-balancer-jopr-plugin-1.0.jar">http://repository.jboss.org/maven2/org/mobicents/tools/sip-balancer-jopr-plugin/1.0/sip-balancer-jopr-plugin-1.0.jar</a></p></li><li><p>Copy the Mobicents SIP Load Balancer Jopr Plug in jar to the
          following directory:</p><p><code class="filename">jopr-server/jbossas/server/default/deploy/rhq.ear/rhq-downloads/rhq-plugins/</code></p></li><li><p>Start the Jopr server then the agent.</p></li><li><p>Start your Mobicents SIP Load Balancer as explained here (and
          one node that connect to it to see it appear in the list of
          nodes).</p></li></ul></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e6888"/>6.2.2. Usage Instructions</h3></div></div></div><div class="itemizedlist"><ul><li><p>Log in to the Jopr console from the <span class="guilabel"><strong>Dashboard</strong></span> tab, in
          the Auto Discovery portlet and import your Mobicents SIP Load Balancer
          (by example Mobicents SIP Load Balancer 1.0-SNAPSHOT) from under
          localhost.</p><div class="figure"><a id="d0e6899"/><div class="figure-contents"><div class="mediaobject"><img src="images/mss-jopr-lb-dashboard.png"/></div></div><p class="title"><b>Figure 6.18. </b></p></div><br class="figure-break"/></li><li><p>From the Dashboard, in the Recently Added Resources
          portlet, click on the Mobicents SIP Load Balancer.</p><div class="figure"><a id="d0e6908"/><div class="figure-contents"><div class="mediaobject"><img src="images/mss-jopr-lb-dash-added.png"/></div></div><p class="title"><b>Figure 6.19. </b></p></div><br class="figure-break"/></li><li><p>In the new Monitor view, click on the
          <span class="guimenuitem"><strong>mobicents:name=LoadBalancer,type=LoadBalancer</strong></span> link.</p><div class="figure"><a id="d0e6919"/><div class="figure-contents"><div class="mediaobject"><img src="images/mss-jopr-lb-monitor.png"/></div></div><p class="title"><b>Figure 6.20. </b></p></div><br class="figure-break"/></li><li><p>You can now see the metrics coming in.</p><div class="figure"><a id="d0e6927"/><div class="figure-contents"><div class="mediaobject"><img src="images/mss-jopr-lb-metrics.png"/></div></div><p class="title"><b>Figure 6.21. </b></p></div><br class="figure-break"/></li><li><p>To configure the Load Balancer and see the list of nodes in
          the cluster it is connected to, click on the <span class="guilabel"><strong>Configure</strong></span> tab.</p><div class="figure"><a id="d0e6938"/><div class="figure-contents"><div class="mediaobject"><img src="images/mss-jopr-lb-config.png"/></div></div><p class="title"><b>Figure 6.22. </b></p></div><br class="figure-break"/></li><li><p>To start and stop the Load Balancer, click on the <span class="guilabel"><strong>Operations</strong></span>
          tab.</p><div class="figure"><a id="d0e6949"/><div class="figure-contents"><div class="mediaobject"><img src="images/mss-jopr-lb-ops.png"/></div></div><p class="title"><b>Figure 6.23. </b></p></div><br class="figure-break"/></li></ul></div></div></div></div><ul class="docnav"><li class="previous"><a accesskey="p" href="ch05.html"><strong>Prev</strong>Chapter 5. Clustering and High Availability</a></li><li class="up"><a accesskey="u" href="#"><strong>Top of page</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Front page</strong></a></li><li class="next"><a accesskey="n" href="afotsss-Advanced_Features_of_the_SIP_Servlets_Server.html"><strong>Next</strong>Chapter 7. Advanced Features of the SIP Servlets ...</a></li></ul></body></html>