<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory">Chapter 7. Advanced Features of the SIP Servlets Server</title><link rel="stylesheet" href="css/jbossorg.css" type="text/css"/><meta xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" name="generator" content="DocBook XSL Stylesheets V1.74.0"/><link rel="home" href="index.html" title="SIP Servlets Server User Guide"/><link rel="up" href="index.html" title="SIP Servlets Server User Guide"/><link rel="prev" href="emom-Enterprise-Monitoring-Operations-Management.html" title="Chapter 6. Enterprise Monitoring and Management"/><link rel="next" href="bp-Best_Practices.html" title="Chapter 8. Best Practices"/></head><body><p id="title"><a href="http://www.jboss.org" class="site_href"><strong>JBoss.org</strong></a><a href="http://docs.jboss.org/" class="doc_href"><strong>Community Documentation</strong></a></p><ul class="docnav"><li class="previous"><a accesskey="p" href="emom-Enterprise-Monitoring-Operations-Management.html"><strong>Prev</strong></a></li><li class="next"><a accesskey="n" href="bp-Best_Practices.html"><strong>Next</strong></a></li></ul><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="afotsss-Advanced_Features_of_the_SIP_Servlets_Server"/>Chapter 7. Advanced Features of the SIP Servlets Server</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="afotsss-Advanced_Features_of_the_SIP_Servlets_Server.html#mipbx-Media_Support">7.1. Media Support</a></span></dt><dd><dl><dt><span class="section"><a href="afotsss-Advanced_Features_of_the_SIP_Servlets_Server.html#d0e6967">7.1.1. JSR 309 : Media Server Control API</a></span></dt></dl></dd><dt><span class="section"><a href="afotsss-Advanced_Features_of_the_SIP_Servlets_Server.html#sscacc-MSS_Concurrency_and_Congestion_Control">7.2. Concurrency and Congestion Control</a></span></dt><dt><span class="section"><a href="afotsss-Advanced_Features_of_the_SIP_Servlets_Server.html#sss-SIP_Servlet_Security">7.3. SIP Servlets Application Security</a></span></dt><dt><span class="section"><a href="afotsss-Advanced_Features_of_the_SIP_Servlets_Server.html#mssstun-MSS_STUN">7.4. STUN Support</a></span></dt><dt><span class="section"><a href="afotsss-Advanced_Features_of_the_SIP_Servlets_Server.html#stf-Seam_Telco_Framework">7.5. Seam Telco Framework</a></span></dt><dt><span class="section"><a href="afotsss-Advanced_Features_of_the_SIP_Servlets_Server.html#ssds-Diameter_Support">7.6. Diameter Support</a></span></dt><dt><span class="section"><a href="afotsss-Advanced_Features_of_the_SIP_Servlets_Server.html#saimse-SIP_and_IMS_Extensions">7.7. SIP and IMS Extensions</a></span></dt><dt><span class="section"><a href="afotsss-Advanced_Features_of_the_SIP_Servlets_Server.html#jruby-telco-integration">7.8. JRuby/Rails Integration with Torquebox Telco Framework</a></span></dt><dt><span class="section"><a href="afotsss-Advanced_Features_of_the_SIP_Servlets_Server.html#ss_jslee_interop">7.9. SIP Servlets - JAIN SLEE Interoperability</a></span></dt><dt><span class="section"><a href="afotsss-Advanced_Features_of_the_SIP_Servlets_Server.html#d0e8266">7.10. Eclipse IDE Tools</a></span></dt><dd><dl><dt><span class="section"><a href="afotsss-Advanced_Features_of_the_SIP_Servlets_Server.html#d0e8276">7.10.1. Pre-Install requirements</a></span></dt><dt><span class="section"><a href="afotsss-Advanced_Features_of_the_SIP_Servlets_Server.html#d0e8281">7.10.2. Installation</a></span></dt><dt><span class="section"><a href="afotsss-Advanced_Features_of_the_SIP_Servlets_Server.html#d0e8292">7.10.3. SIP Servlets Core Plug-in</a></span></dt><dt><span class="section"><a href="afotsss-Advanced_Features_of_the_SIP_Servlets_Server.html#d0e8300">7.10.4. SIP Phone Plug-in</a></span></dt></dl></dd></dl></div><p>The advanced features of Mobicents SIP Servlets include Concurrency and 
Congestion Control, Load Balancing with the Mobicents Load Balancer, and, exclusively for MSS for JBoss, clustering and failover support.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="mipbx-Media_Support"/>7.1. Media Support</h2></div></div></div><p>Mobicents SIP Servlets by implementing the SIP Servlets 1.1
  specification is providing natively support for applications to setup calls
  through SIP Support.</p><p>But since most Telco services have the need for managing and
  controlling media, by example to play announcements, mixing calls, recognize
  DTMF, ... Mobicents SIP Servlets allows applications to control media through JSR 309.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e6967"/>7.1.1. JSR 309 : Media Server Control API</h3></div></div></div><p>This Specification is a protocol agnostic API for Media Server
    Control. It provides a portable interface to create media rich
    applications with IVR, Conferencing, Speech Recognition, and similar
    features.</p><p>Mobicents Media Server provides an implementation of the <a class="ulink" href="http://jcp.org/en/jsr/detail?id=309">JSR 309 specification</a> using the MGCP protocol to
    allow controlling any Media Server (located in the same Virtual Machine or
    on a remote server) supporting MGCP.</p><p>The following examples demonstrate its usage :</p><div class="itemizedlist"><ul><li><p><a class="ulink" href="http://www.mobicents.org/mss-jsr309-demo.html">Media Example</a> : a SIP Servlet application showing how to use media
        capabilities (Media playback, Recording, Text to Speech with FreeTTS and DTMF detection).</p></li><li><p><a class="ulink" href="http://www.mobicents.org/conference-demo-jsr309.html">Conference Demo</a> : a Conference Media Server demo application built on GWT
        with server-push updates.</p></li><li><p><a class="ulink" href="http://www.mobicents.org/shopping-demo-jsr309.html">Shopping Example</a> : a Converged JEE Application showing SEAM
        integration, JEE, Media integration with TTS and DTMF support.</p></li></ul></div></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="sscacc-MSS_Concurrency_and_Congestion_Control"/>7.2. Concurrency and Congestion Control</h2></div></div></div><p>Concurrency and Congestion control refer to settings  that
  define the way in which messages are processed under heavy load.  The way Mobicents SIP Servlets Server processes messages in a production environment is crucial to ensure quality of service for customers. </p><p>Concurrency control mode tuning affects  the way in which
  the SIP Servlets Server processes messages, whereas Congestion Control tuning affects the point at which   the server
  begins rejecting new requests. Both of these parameters can be set using the following methods: </p><div class="itemizedlist"><ul><li><p>through the SIP Servlets Management Console.</p></li><li><p>editing
  the server's <code class="filename">server.xml</code> configuration file.</p></li><li><p>from the
  <code class="literal">dispatcher</code> MBean.</p></li><li><p>from the Embedded Jopr integrated
  management platform.</p></li></ul></div><h5 xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="formalpara">Concurrency Control</h5><p class="formalpara">The JSR 289 expert group does not specify how concurrency control should be implemented.  </p><p>Mobicents SIP Servlets for JBoss and Mobicents SIP Servlets for Tomcat have concurrency control implemented as
    a configurable mode, which defines the way in which the SIP Servlets Server processes messages.</p><p>It has to be noted that this concurrency control mechanism is not cluster aware and will work per node only, it is not a cluster wide lock.</p><p>The following modes are provided, and cater for the particular setup required in an implementation:</p><div class="variablelist"><dl><dt><span class="term">None</span></dt><dd><p>All SIP messages are processed as soon as possible in a thread
        from the global thread pool. </p><p>When two messages
        belong  to the same <code class="literal">SipSession</code>,  they can be concurrently processed.  Ensure that SIP Messages that access shared resources (such as the session attribute) concurrently  are synchronized in a
        thread-safe manner.</p></dd><dt><span class="term">Transaction</span></dt><dd><p>Bypass the SIP Servlets request/response executors, and utilize the JAIN SIP built-in Transaction serialization to manage race conditions on the same transaction.</p><p>By default, the SIP Servlets server uses a ThreadPoolExecutor linked to a LinkedBlockingQueue to dispatch the request/response threads. The container can thus handles two different response (for example a 180 Ringing and a 200 OK) concurrently, a race condition can occur where the second response overtakes the first one (200 OK dispatched to the application before the 180 Ringing).
        </p></dd><dt><span class="term">SipSession</span></dt><dd><p>SIP messages are processed as soon as possible except for messages originating from the same <code class="literal">SipSession</code>. These messages are  excluded from any simultaneous processing. </p><p>Messages from the same
        <code class="literal">SipSession</code> are processed sequentially, in the order they  originally arrived. </p><p>Two (or more) messages from different
        <code class="literal">SipSession</code> instances in the same
        <code class="literal">SipApplicationSession</code> may be processed
        simultaneously.  For this reason,  ensure that SIP Messages which  access shared resources (such as the session attribute) concurrently  are synchronized in a
        thread-safe manner. </p><p>Thread-safety is particularly important in  Back-to-Back User Agent (B2BUA) cases,  where each communication leg of the
        B2BUA consists of a different <code class="literal">SipSession</code> in the
        same <code class="literal">SipApplicationSession</code>.</p></dd><dt><span class="term">SipApplicationSession</span></dt><dd><p>SIP messages are processed as soon as possible, with the
        guarantee that no two messages from the same
        <code class="literal">SipSession</code> <span class="emphasis"><em>or</em></span> from the same
        <code class="literal">SipApplicationSession</code> will ever be processed
        simultaneously.  Of all the available methods, this mode is the best choice for guaranteed  thread-safety. </p><p>If applications  access shared resources in an unmanaged
        way (for example,  by accessing a <code class="literal">SipSession</code> attribute
        from an unmanaged thread, or from an Enterprise JavaBean) access will not be synchronized.</p></dd></dl></div><h5 xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="formalpara">Congestion Control</h5><p class="formalpara">Mobicents Sip Servlets currently provides the following  congestion
    control mechanisms :</p><div class="itemizedlist"><ul><li><p>All SIP messages which cannot be processed immediately are put
      into a queue, and  wait for either a free thread or for the lock
      on their session to be released. The  size of the  SIP message
      queue is a tunable parameter, which defaults to
      <code class="literal">1500</code>.</p></li><li><p>If the SIP Message queue becomes full, the
      container immediately begins rejecting  new SIP requests until the queue clears.  This is achieved by using one of the following methods:</p><div class="itemizedlist"><ul><li><p>Sending a <code class="literal">503</code> SIP error code  to the originating application.</p></li><li><p>Dropping  incoming
      messages (according to the specified  congestion control policy).</p></li></ul></div></li><li><p>If the container exceeds the  configurable memory threshold (90% by  default), new  SIP requests are rejected   until the
      memory usage falls below the specified memory threshold.  This is achieved by using one of the following methods:</p><div class="itemizedlist"><ul><li><p>Sending a <code class="literal">503</code> SIP error code  to the originating application.</p></li><li><p>Dropping  incoming
      messages (according to the specified  congestion control policy)  .</p></li></ul></div></li></ul></div><p>A background task gathers information about the current server congestion.  The data collection interval   can be adjusted, and congestion control deactivated,  by setting the interval to 0 or a
  negative value.</p><p>The congestion control policy defines how an  incoming
  message is handled when  the server is overloaded.  The following parameters are configurable:</p><div class="itemizedlist"><ul><li><p>DropMessage - drop any incoming message</p></li><li><p>ErrorResponse - send a 503 - Service Unavailable response to any
      incoming request (Default).</p></li></ul></div><p class="formalpara"><a id="sscacc-Configuring_the_Concurrency_and_Congestion_Control_Settings"/></p><h5 xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="formalpara">Configuring the Concurrency and Congestion Control Settings</h5><p class="formalpara">The concurrency and congestion control settings can be configured
    through the SIP Servlets Management Console, using the following methods: </p><div class="itemizedlist"><ul><li><p>through the SIP Servlets Management Console.</p></li><li><p>editing
  the server's <code class="filename">server.xml</code> configuration file.</p></li><li><p>from the
  <code class="literal">dispatcher</code> MBean.</p></li><li><p>from the Embedded Jopr integrated
  management platform.</p></li></ul></div><div class="variablelist"><dl><dt><span class="term">Tuning Parameters with the SIP Servlets Management Console</span></dt><dd><p>The easiest way to configure the <span class="guilabel"><strong>SIP Message Queue Size</strong></span> and <span class="guilabel"><strong>Concurrency Control Mode</strong></span>
        tunable parameters is to open the <code class="literal">SIP Servlets Management Console</code> in your browser (by going to <a class="ulink" href="http://localhost:8080/sip-servlets-management">http://localhost:8080/sip-servlets-management</a>), making
        your changes, and then <span class="guibutton"><strong>Apply</strong></span>ing them. </p><div class="figure"><a id="d0e7199"/><div class="figure-contents"><div class="mediaobject" align="center"><a id="sscacc-sas-MSSSManagementConsole-ss-ServerSettings-1"/><img src="images/mss-MSSSManagementConsole-ss-ServerSettings.png" align="middle" alt="SIP Servlets Management Console Concurrency and Congestion Control Tuning Parameters"/></div></div><p class="title"><b>Figure 7.1. SIP Servlets Management Console Concurrency and Congestion Control Tuning Parameters</b></p></div><br class="figure-break"/><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="important"><h2>Persistent Settings</h2><p>Concurrency and congestion control settings altered through the SIP Servlets Management console are not saved to the <code class="filename">server.xml</code> configuration file.  </p><p>To make settings persistent, append the settings to  the <code class="filename">server.xml</code> file directly.  </p></div></dd><dt><span class="term">Tuning Parameters Permanently by Editing <code class="filename">server.xml</code></span></dt><dd><p>Alternatively, you can edit your server's
        <code class="filename">server.xml</code> configuration file, which has the
        benefit of making your chosen settings changes permanent. Instructions
        follow, grouped by the SIP Servlets Server you are running:</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><a id="d0e7229"/><p class="title"><b>Procedure 7.1. Tuning Mobicents SIP Servlets for JBoss Server Settings for Concurrency and Congestion Control</b></p><ol class="1"><li><p class="title"><b>Open server.xml File</b></p><p>Open the
            <code class="filename"><code class="envar">$JBOSS_HOME</code>/server/default/deploy/jboss-web.deployer/server.xml</code>
            configuration file in a text editor.</p></li><li><p class="title"><b>Add Parameters to &lt;service&gt; Element</b></p><p>Locate the <span class="markup">&lt;service&gt;</span> element, and add the
            <code class="literal">concurrencyControlMode</code> and/or 
            <code class="literal">sipMessageQueueSize</code> attributes.</p><div class="example"><a id="sscacc-MSSJ-Permanently_Changing_Tunable_Parameters_by_Editing_server.xml"/><p class="title"><b>Example 7.1. server.xml Concurrency and Congestion Control Attributes</b></p><div class="example-contents"><pre xmlns="" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">Service</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;jboss.web&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">className</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.mobicents.servlet.sip.startup.SipStandardService&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">sipApplicationDispatcherClassName</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.mobicents.servlet.sip.core.SipApplicationDispatcherImpl&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">usePrettyEncoding</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;false&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">sipStackPropertiesFile</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;conf/mss-sip-stack.properties&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">darConfigurationFileLocation</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;conf/dars/mobicents-dar.properties&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">concurrencyControlMode</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;SipApplicationSession&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">sipMessageQueueSize</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;1600&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">backToNormalSipMessageQueueSize</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;1300&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">congestionControlCheckingInterval</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;2000&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">congestionControlPolicy</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;DropMessage&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">memoryThreshold</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;95&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">backToNormalMemoryThreshold</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;90&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></div></div><br class="example-break"/><p>Possible values for the
            <code class="literal">concurrencyControlMode</code> attribute include:
            <em class="replaceable"><code>None</code></em>,
            <em class="replaceable"><code>SipSession</code></em> or
            <em class="replaceable"><code>SipApplicationSession</code></em>.
            <em class="replaceable"><code>SipSession</code></em> is the value of this
            attribute when it is not present—and overridden—in
            <code class="filename">server.xml</code>.</p></li><li><p class="title"><b>Define the Correct Attribute Values</b></p><p>The following  default values for the concurrency and congestion control parameters are used regardless of whether the attributes are defined in the <code class="filename">server.xml</code> file:</p><div class="itemizedlist"><ul><li><p>sipMessageQueueSize="1500"</p></li><li><p>backToNormalSipMessageQueueSize="1300"</p></li><li><p>congestionControlCheckingInterval="30000" (30 seconds, in milliseconds)</p></li><li><p>memoryThreshold="95" (in percentage)</p></li><li><p>backToNormalMemoryThreshold="90" (in percentage)</p></li><li><p>congestionControlPolicy="ErrorResponse"</p></li></ul></div><p>Experimentation is required for these tuning parameters depending on the operating system and server.</p></li></ol></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><a id="d0e7310"/><p class="title"><b>Procedure 7.2. Tuning Mobicents SIP Servlets for Tomcat Server Settings for Concurrency and Congestion Control</b></p><ol class="1"><li><p class="title"><b>Open server.xml File</b></p><p>Open the
            <code class="filename"><code class="envar">$CATALINA_HOME</code>/conf/server.xml</code>
            configuration file in your text editor.</p></li><li><p class="title"><b>Add Parameters to &lt;service&gt; Element</b></p><p>Locate the <span class="markup">&lt;service&gt;</span> element, and add the
            <code class="literal">concurrencyControlMode</code> and/or 
            <code class="literal">sipMessageQueueSize</code> attributes.</p><p>Possible values for the
            <code class="literal">concurrencyControlMode</code> attribute include:
            <em class="replaceable"><code>None</code></em>,
            <em class="replaceable"><code>SipSession</code></em> or
            <em class="replaceable"><code>SipApplicationSession</code></em>.
            <em class="replaceable"><code>SipSession</code></em> is the value of this
            attribute when it is not present—and overridden—in
            <code class="filename">server.xml</code>.</p></li><li><p class="title"><b>Define the Correct Attribute Values</b></p><p>The following  default values for the concurrency and congestion control parameters are used regardless of whether the attributes are defined in the <code class="filename">server.xml</code> file:</p><div class="itemizedlist"><ul><li><p>sipMessageQueueSize="1500"</p></li><li><p>backToNormalSipMessageQueueSize="1300"</p></li><li><p>congestionControlCheckingInterval="30000" (30 seconds, in milliseconds)</p></li><li><p>memoryThreshold="95" (in percentage)</p></li><li><p>backToNormalMemoryThreshold="90" (in percentage)</p></li><li><p>congestionControlPolicy="ErrorResponse"</p></li></ul></div><p>Experimentation is required for these tuning parameters depending on the operating system and server.</p></li></ol></div></dd><dt><span class="term">Tuning Parameters from the dispatcher MBean</span></dt><dd><p>Navigate to the <code class="literal">dispatcher</code> MBean from
        Mobicents SIP Servlets for JBoss's JMX console. </p><p>All changes performed
        at run time are effective immediately, but do not persist across
        reboots.  As with JBoss and Tomcat, the   <code class="filename">server.xml</code> must be appended with the settings in order to make the configuration persistent.</p><p>When editing the <code class="literal">dispatcher</code> MBean from
        Mobicents SIP Servlets for JBoss's JMX console, values allowed for the
        concurrency control mode are <strong class="userinput"><code>None</code></strong>,
        <strong class="userinput"><code>SipSession</code></strong> or
        <strong class="userinput"><code>SipApplicationSession</code></strong>.</p></dd><dt><span class="term">Tuning Parameters from Enterprise Monitoring and Managent Console</span></dt><dd><p>If  the Enterprise Monitoring and Managenemt console is installed as described in <a class="xref" href="emom-Enterprise-Monitoring-Operations-Management.html" title="Chapter 6. Enterprise Monitoring and Management">Chapter 6, <i>Enterprise Monitoring and Management</i></a>, the tunable parameters can be altered by  following the instructions  in <a class="xref" href="emom-Enterprise-Monitoring-Operations-Management.html#emom-Embedded-Jopr" title="6.1.2.1. Jopr for Development">Section 6.1.2.1, “Jopr for Development”</a> or <a class="xref" href="emom-Enterprise-Monitoring-Operations-Management.html#emom-Jopr4Production" title="6.1.2.2. Jopr For Production">Section 6.1.2.2, “Jopr For Production”</a></p></dd></dl></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="sss-SIP_Servlet_Security"/>7.3. SIP Servlets Application Security</h2></div></div></div><p>The information present in SIP requests often contains sensitive user information.  To protect user information, SIP Security can be enabled on the server, and within the SIP application to mitigate the risk of unauthorised access to the information.</p><p>Application security varies depending on the server type used.  The following procedures describe how to configure the JBoss Application Server, and the Tomcat server.</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><a id="d0e7432"/><p class="title"><b>Procedure 7.3. Enable SIP Application Security in JBoss Application Server</b></p><ol class="1"><li><p class="title"><b>Add Security Policy to Server</b></p><div class="orderedlist"><ol><li><p>Open a terminal and navigate to the conf directory:</p><pre class="programlisting">home]$ cd server/default/conf/</pre></li><li><p>Open <code class="literal">login-config.xml</code> (using your preferred editor) and append the security policy to the file:</p><pre xmlns="" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">application-policy</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;sip-servlets&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">authentication</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">login-module</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">code</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.security.auth.spi.UsersRolesLoginModule&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">flag</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">=</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_value">&quot;required&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">module-option</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;usersProperties&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">props/sip-servlets-</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;users.properties</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">module-option</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">module-option</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;rolesProperties&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">props/sip-servlets-</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;roles.properties</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">module-option</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">module-option</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;hashAlgorithm&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">MD5</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">module-option</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">module-option</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;hashEncoding&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">rfc2617</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">module-option</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">module-option</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;hashUserPassword&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">false</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">module-option</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">module-option</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;hashStorePassword&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">true</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">module-option</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">module-option</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;passwordIsA1Hash&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">true</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">module-option</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">module-option</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;storeDigestCallback&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;org.jboss.security.auth.spi.RFC2617Digest</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">module-option</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">login-module</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">authentication</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">application-policy</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><br />
</pre></li></ol></div></li><li><p class="title"><b>Update SIP Server User Properties File</b></p><div class="orderedlist"><ol><li><p>Open a terminal and navigate to the /props directory:</p><pre class="programlisting">home]$ cd server/default/props/</pre></li><li><p>Open <code class="literal">sip-servlets-users.properties</code> and append the user lines to the file:</p><pre class="programlisting"> 
  # A sample users.properties file, this line creates user "admin" with 
  # password "admin" for "sip-servlets-realm"
  admin=&lt;A1_cryptographic_string&gt;
  </pre></li><li><p>To create &lt;A1_cryptographic_string&gt;, execute the following command in a terminal:</p><pre class="programlisting">home]$ java -cp ../server/default/lib/jbosssx.jar</pre></li><li><p>Copy the A1 hash, and paste it into the admin parameter in the previous step.</p></li><li><p>Save and close <code class="literal">sip-servlets-users.properties</code>.</p></li></ol></div></li><li><p class="title"><b>Update SIP Server Roles File</b></p><div class="orderedlist"><ol><li><p>Open a terminal and navigate to the /props directory:</p><pre class="programlisting">home]$ cd server/default/props/</pre></li><li><p>Open <code class="literal">sip-servlets-roles.properties</code> (using your preferred editor) and append the following information to the file:</p><pre class="programlisting"> 
# A sample roles.properties file for use with some roles
# Each line in this file assigns roles to the users defined in 
# sip-servlets-users.properties
admin=caller,role1,role2,..
            </pre></li></ol></div></li><li><p class="title"><b>Add the Security Domain to the SIP Application</b></p><div class="orderedlist"><ol><li><p>Open the <code class="literal">jboss-web.xml</code> file for the SIP application to which security is required.</p></li><li><p>Add the  <span class="markup">&lt;security-domain&gt;</span> element as a child of the <span class="markup">&lt;jboss-web&gt;</span> element:</p><pre xmlns="" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">jboss-web</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_comment">&lt;!--Uncomment&nbsp;the&nbsp;security-domain&nbsp;to&nbsp;enable&nbsp;security.&nbsp;You&nbsp;will&nbsp;need&nbsp;to&nbsp;edit&nbsp;the&nbsp;htmladaptor--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_comment">&lt;!--login&nbsp;configuration&nbsp;to&nbsp;setup&nbsp;the&nbsp;login&nbsp;modules&nbsp;used&nbsp;to&nbsp;authentication&nbsp;users.--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">security-domain</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">java:/jaas/sip-servlets</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">security-domain</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">jboss-web</span><span class="xml_plain">&nbsp;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre></li></ol></div></li><li><p class="title"><b>Add Security Constraints to the SIP Application</b></p><div class="orderedlist"><ol><li><p>Open the <code class="literal">sip.xml</code> file for the SIP application.</p></li><li><p>Add  the <span class="markup">&lt;security-domain&gt;</span> element as a child of   the <span class="markup">&lt;jboss-web&gt;</span> element:</p><pre xmlns="" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">security-constraint</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">display-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">REGISTER&nbsp;Method&nbsp;Security&nbsp;Constraint</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">display-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">resource-collection</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">resource-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">SimpleSipServlet</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">resource-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Require&nbsp;authenticated&nbsp;REGISTER&nbsp;requests</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">SimpleSipServlet</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">sip-method</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">REGISTER</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">sip-method</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">resource-collection</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">auth-constraint</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">role-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">caller</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">role-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">auth-constraint</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">security-constraint</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">login-config</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">auth-method</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">DIGEST</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">auth-method</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">realm-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">sip-servlets-realm</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">realm-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">login-config</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre></li></ol></div></li></ol></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><a id="d0e7542"/><p class="title"><b>Procedure 7.4. Enable SIP Application Security in Tomcat Server</b></p><ol class="1"><li><p class="title"><b>Activate the Memory Realm in Catalina:</b></p><div class="orderedlist"><ol><li><p>Open a terminal and navigate to the <code class="filename">/conf</code> directory:</p><pre class="programlisting">home]$ cd server/default/&lt;tomcat_home&gt;/conf/</pre></li><li><p>Open <code class="literal">server.xml</code> and uncomment the following line:</p><pre xmlns="" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_comment">&lt;!--&lt;Realm&nbsp;className=&quot;org.apache.catalina.realm.MemoryRealm&quot;/&gt;--&gt;</span><span class="xml_plain"></span><br />
</pre></li></ol></div></li><li><p class="title"><b>Update SIP Server User Properties File</b></p><div class="orderedlist"><ol><li><p>In the <code class="filename">/conf</code> directory, open <code class="literal">tomcat-users.xml</code> (using your preferred editor) and append the following <span class="markup">&lt;user&gt;</span> child element:</p><pre xmlns="" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">user</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;user&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">password</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;password&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">roles</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;caller&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
</pre></li></ol></div></li><li><p class="title"><b>Add Security Constraints to the SIP Application</b></p><div class="orderedlist"><ol><li><p>Open the <code class="literal">sip.xml</code> file for the SIP application to which security is required.</p></li><li><p>Add the <span class="markup">&lt;security-domain&gt;</span> child element  to the <span class="markup">&lt;jboss-web&gt;</span> element:</p><pre xmlns="" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">security-constraint</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">display-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">REGISTER&nbsp;Method&nbsp;Security&nbsp;Constraint</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">display-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">resource-collection</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">resource-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">SimpleSipServlet</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">resource-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">Require&nbsp;authenticated&nbsp;REGISTER&nbsp;requests</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">description</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">servlet-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">SimpleSipServlet</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">servlet-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">sip-method</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">REGISTER</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">sip-method</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">resource-collection</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">auth-constraint</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">role-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">caller</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">role-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">auth-constraint</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">security-constraint</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">login-config</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">auth-method</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">DIGEST</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">auth-method</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">realm-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">sip-servlets-realm</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">realm-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">login-config</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre></li></ol></div></li></ol></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="mssstun-MSS_STUN"/>7.4. STUN Support</h2></div></div></div><p>The Session Traversal Utilities for NAT (STUN) prococol is used in
  Network Address Translation (NAT) traversal for real-time voice, video,
  messaging, and related interactive IP application communications. This
  light-weight, client-server protocol allows applications passing through a
  NAT to obtain the public IP address for the UDP connections the application
  uses to connect to remote hosts.</p><p>STUN support is provided at the SIP connector level, using the <a class="ulink" href="https://stun4j.dev.java.net/">STUN for Java</a> project. The STUN
  for Java project provides a Java implementation of the STUN Protocol (RFC
  3489), which allows each SIP connector to select whether it should use STUN
  to discover a public IP address, and use this address in the SIP messages
  sent through the connector.</p><p>To make a SIP connector STUN-enabled, three attributes must be
  appended to the <span class="markup">&lt;connector&gt;</span> child element in the <code class="filename">server.xml</code>
  file. The properties are: </p><div class="itemizedlist"><ul><li><p>useStun="true"</p><p>Enables STUN support for this connector. Ensure that the
        <code class="literal">ipAddress</code> attribute is not set to
        <code class="literal">127.0.0.1</code></p></li><li><p>stunServerAddress="&lt;Public_STUN_Server&gt;"</p><p>STUN server address used to discover the public IP address of
        this SIP Connector. See <a class="xref" href="afotsss-Advanced_Features_of_the_SIP_Servlets_Server.html#tab-pss-Public_STUN_Servers" title="Table 7.1. Public STUN Servers">Table 7.1, “Public STUN Servers”</a>for a suggested list of public
        STUN servers.</p></li><li><p>stunServerPort="3478"</p><p>STUN server port of the STUN server used in the
        <code class="literal">stunServerAddress</code> attribute. Both TCP and UDP
        protocols communicate with STUN servers using this port only.</p></li></ul></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>A complete list of available SIP connector attributes and their
    descriptions is located in the <a class="xref" href="sssicar-SIP_Servlets_Server-Installing_Configuring_and_Running.html#bsssc-binary-SIP_Servlets_Server-Adding_SIP_Connectors" title="2.3.1. Configuring SIP Connectors">Section 2.3.1, “Configuring SIP Connectors”</a>
    section of this guide.</p></div><p>A number of public STUN servers are available, and can be specified in
  the <code class="literal">stunServerAddress</code>. Depending on the router firmware used, the STUN reply
  packets' MAPPED_ADDRESS may be changed to the router's WAN port. To
  alleviate this problem, certain public STUN servers provide
  XOR_MAPPED_ADDRESS support. <a class="xref" href="afotsss-Advanced_Features_of_the_SIP_Servlets_Server.html#tab-pss-Public_STUN_Servers" title="Table 7.1. Public STUN Servers">Table 7.1, “Public STUN Servers”</a>
  provides a selection of public STUN servers.</p><div class="table"><a id="tab-pss-Public_STUN_Servers"/><p class="title"><b>Table 7.1. Public STUN Servers</b></p><div class="table-contents"><table summary="Public STUN Servers" border="1"><colgroup><col align="left"/><col align="left"/><col align="left"/></colgroup><thead><tr><th align="center">Server Address</th><th align="center">XOR Support</th><th align="center">DNS SRV Record</th></tr></thead><tbody><tr><td align="left">stun.ekiga.net</td><td align="left">Yes</td><td align="left">Yes</td></tr><tr><td align="left">stun.fwdnet.net</td><td align="left">No</td><td align="left">Yes</td></tr><tr><td align="left">stun.ideasip.com</td><td align="left">No</td><td align="left">Yes</td></tr><tr><td align="left">stun01.sipphone.com</td><td align="left">Yes</td><td align="left">No</td></tr><tr><td align="left">stun.softjoys.com</td><td align="left">No</td><td align="left">No</td></tr><tr><td align="left">stun.voipbuster.com</td><td align="left">No</td><td align="left">No</td></tr><tr><td align="left">stun.voxgratia.org</td><td align="left">No</td><td align="left">No</td></tr><tr><td align="left">stun.xten.com</td><td align="left">Yes</td><td align="left">Yes</td></tr><tr><td align="left">stunserver.org</td><td align="left">Yes</td><td align="left">Yes</td></tr></tbody></table></div></div><br class="table-break"/><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>For more information about NAT traversal best practices, refer to  <a class="xref" href="bp-Best_Practices.html#bp-Best_Practices_NAT" title="8.2. NAT Traversal">Section 8.2, “NAT Traversal”</a></p></div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="stf-Seam_Telco_Framework"/>7.5. Seam Telco Framework</h2></div></div></div><p>The Seam Telco Framework (STF) is a telecommunications application framework based on the JSR-289 specification, and JBoss Seam.  The framework plugs the SIP Servlets 1.1 stack into new or existing JBoss Seam applications. Media is achieved through JSR-309. This allows Seam components to implement both the Web and telecommunication logic of the applications.</p><p>The primary goals of the STF are to: </p><div class="itemizedlist"><ul><li><p>Unify Web, SIP, and media telecommunication applications.</p></li><li><p>Allow complex enterprise applications to be built using the same programming model.</p></li><li><p>Keep logical associations between SIP, Media and Web sessions.</p></li></ul></div><p>From an integration perspective, JBoss Seam provides access to different frameworks.  These frameworks are made available to the telecommunication-specific applications for a particular role using the same context.  The STF manages SipServletRequests and Media Server events while utilising existing JBoss Seam framework benefits, including:
      </p><div class="itemizedlist"><ul><li><p>Bijection</p></li><li><p>Inversion of Control (IoC)</p></li><li><p>Interceptors</p></li><li><p>Scoping</p></li><li><p>Transaction management</p></li></ul></div><p>
      </p><p>Other advantages associated with the STF include:
      </p><div class="itemizedlist"><ul><li><p>Enterprise Java Beans (EJB) and Plain Old Java Objects (POJO) support.</p></li><li><p>Loosely-coupled, asynchronous telecommunicaton component support.</p></li><li><p>Web-layer interaction support.</p></li><li><p>Synchronous and asynchronous light-weight message passing using @Observer-annotated methods.</p></li><li><p>Integration with existing Seam IDE tools and infrastructure syntax.</p></li></ul></div><p>
      </p><p>More information about the STF can be found on the <a class="ulink" href="http://groups.google.com/group/mobicents-public/web/seam-telco-framework-for-sip-servlets">STF homepage</a>.  For information about JBoss Seam, refer to the <a class="ulink" href="http://docs.jboss.com/seam/latest/reference/en-US/html/index.html">community documentation</a>.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="ssds-Diameter_Support"/>7.6. Diameter Support</h2></div></div></div><p>The Diameter Protocol (<a class="ulink" href="http://www.ietf.org/rfc/rfc3588.txt">RFC 3588</a>) is a computer networking protocol for Authentication, Authorization, and Accounting (AAA). the Diameter version included in Mobicents SIP Servlets currently support Base, Sh, Ro and Rf.</p><p>For more information regarding Diameter support, refer to the <a class="ulink" href="http://groups.google.com/group/mobicents-public/web/mobicents-diameter">Diameter Home Page</a>.  For a list of Diameter examples, refer to <a class="xref" href="ssea-SIP_Servlet_Example_Applications.html" title="Chapter 4. SIP Servlet Example Applications">Chapter 4, <i>SIP Servlet Example Applications</i></a>.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="saimse-SIP_and_IMS_Extensions"/>7.7. SIP and IMS Extensions</h2></div></div></div><p>SIP Extensions in the SIP Servlets Server are based on Internet Engineering Task Force (IETF) Request for Comments (RFC) protocol recommendatons.  <a class="xref" href="afotsss-Advanced_Features_of_the_SIP_Servlets_Server.html#tab-sse-Supported_SIP_Extensions" title="Table 7.2. Supported SIP Extensions">Table 7.2, “Supported SIP Extensions”</a> lists the supported RFCs for the SIP Servlets Server.</p><div class="table"><a id="tab-sse-Supported_SIP_Extensions"/><p class="title"><b>Table 7.2. Supported SIP Extensions</b></p><div class="table-contents"><table summary="Supported SIP Extensions" border="1"><colgroup><col align="left"/><col align="left"/><col align="left"/></colgroup><thead><tr><th align="center">Extension</th><th align="center">RFC Number</th><th align="center">Description</th></tr></thead><tbody><tr><td align="left">DNS</td><td align="left"><a class="ulink" href="http://www.ietf.org/rfc/rfc3263.txt">RFC 3263</a></td><td align="left">SIP: Locating SIP Servers</td></tr><tr><td align="left">INFO</td><td align="left"><a class="ulink" href="http://www.ietf.org/rfc/rfc2976.txt">RFC 2976</a></td><td align="left">The SIP INFO Method</td></tr><tr><td align="left">IPv6</td><td align="left"><a class="ulink" href="http://www.ietf.org/rfc/rfc2460.txt">RFC 2460</a></td><td align="left">Internet Protocol, Version 6 (IPv6) Specification</td></tr><tr><td align="left">JOIN</td><td align="left"><a class="ulink" href="http://www.ietf.org/rfc/rfc3911.txt">RFC 3911</a></td><td align="left">The SIP "Join" Header</td></tr><tr><td align="left">MESSAGE</td><td align="left"><a class="ulink" href="http://www.ietf.org/rfc/rfc3428.txt">RFC 3428</a></td><td align="left">SIP Extension for Instant Messaging</td></tr><tr><td align="left">PATH</td><td align="left"><a class="ulink" href="http://www.ietf.org/rfc/rfc3327.txt">RFC 3327</a></td><td align="left">SIP Extension Header Field for Registering Non-adjacent Contacts</td></tr><tr><td align="left">PRACK</td><td align="left"><a class="ulink" href="http://www.ietf.org/rfc/rfc3262.txt">RFC 3262</a></td><td align="left">Reliability of Provisional Responses in the SIP</td></tr><tr><td align="left">PUBLISH</td><td align="left"><a class="ulink" href="http://www.ietf.org/rfc/rfc3903.txt">RFC 3903</a></td><td align="left">SIP Extension for Event State Publication</td></tr><tr><td align="left">REASON</td><td align="left"><a class="ulink" href="http://www.ietf.org/rfc/rfc3326.txt">RFC 3515</a></td><td align="left">The Reason Header Field for the Session Initiation Protocol (SIP)</td></tr><tr><td align="left">REFER</td><td align="left"><a class="ulink" href="http://www.ietf.org/rfc/rfc3515.txt">RFC 3515</a></td><td align="left">The SIP Refer Method</td></tr><tr><td align="left">REPLACES</td><td align="left"><a class="ulink" href="http://www.ietf.org/rfc/rfc3891.txt">RFC 3891</a></td><td align="left">The SIP "Replaces" Header</td></tr><tr><td align="left">STUN</td><td align="left"><a class="ulink" href="http://www.ietf.org/rfc/rfc3489.txt">RFC 3489</a></td><td align="left">STUN - Simple Traversal of User Datagram Protocol (UDP) through Network Address Translators (NATs)</td></tr><tr><td align="left">SUBSCRIBE/NOTIFY</td><td align="left"><a class="ulink" href="http://www.ietf.org/rfc/rfc3265.txt">RFC 3265</a></td><td align="left">SIP-specific Event Notification</td></tr><tr><td align="left">Symmetric Response Routing</td><td align="left"><a class="ulink" href="http://www.ietf.org/rfc/rfc3581.txt">RFC 3581</a></td><td align="left">An Extension to the Session Initiation Protocol (SIP) for Symmetric Response Routing</td></tr><tr><td align="left">Multipart type as mentionned in </td><td align="left"><a class="ulink" href="http://www.ietf.org/rfc/rfc4662.txt">RFC 4662</a></td><td align="left">A Session Initiation Protocol (SIP) Event Notification</td></tr></tbody></table></div></div><br class="table-break"/><p>IMS Private Header (P-Header) Extensions are provided according to the recommendations of the <a class="ulink" href="http://www.3gpp.org/">3rd Generation Partnering Project (3GPP)</a>, and the IETF.  P-Header extensions are primarily used to store information about the networks a call traverses, including (but not limited to) security or call charging details.</p><p><a class="xref" href="afotsss-Advanced_Features_of_the_SIP_Servlets_Server.html#tab-sse-IMS_P-Header_Extensions" title="Table 7.3. IMS P-Header Extensions">Table 7.3, “IMS P-Header Extensions”</a> describes the list of supported P-Headers, including links to the relevant ITEF memorandum where available.</p><div class="table"><a id="tab-sse-IMS_P-Header_Extensions"/><p class="title"><b>Table 7.3. IMS P-Header Extensions</b></p><div class="table-contents"><table summary="IMS P-Header Extensions" border="1"><colgroup><col align="left"/><col align="left"/></colgroup><thead><tr><th align="center">Extension</th><th align="center">Description</th></tr></thead><tbody><tr><td align="left">AuthorizationHeaderIMS</td><td align="left">Defines a new auth-param for the Authorization header used in REGISTER requests.</td></tr><tr><td align="left">PAccessNetworkInfoHeader</td><td align="left">Contains information regarding the access network the User Agent (UA) uses to connect to the SIP Proxy.  The information contained in this header may be sensitive, such as the cell ID, so it is important to secure all SIP application that interface with this header. </td></tr><tr><td align="left"><a class="ulink" href="http://www.ietf.org/rfc/rfc3324.txt">PAssertedIdentityHeader</a></td><td align="left">Contains an identity resulting from an authentication process, derived from a SIP network intermediary.  The identity may be based on SIP Digest authentication.</td></tr><tr><td align="left">PAssertedServiceHeader</td><td align="left">Contains information used by "trust domains", according to Spec(T) specifications detailed in <a class="ulink" href="http://www.ietf.org/rfc/rfc3324.txt">RFC 3324</a>.</td></tr><tr><td align="left"><a class="ulink" href="http://www.ietf.org/rfc/rfc3455.txt">PAssociatedURIHeader</a></td><td align="left">Contains a list of URIs that are allocated to the user.  The header is defined in the 200 OK response to a REGISTER request.  It allows the User Agent Client (UAC) to determine the URIs the service provider has associated to the user's address-of-record URI.</td></tr><tr><td align="left"><a class="ulink" href="http://www.ietf.org/rfc/rfc3327.txt">PathHeader</a></td><td align="left">SIP Extension header, with syntax similar to the RecordRoute header.  Used in conjunction with SIP REGISTER requests and 200 class messages in response to REGISTER responses.</td></tr><tr><td align="left">PCalledPartyIDHeader</td><td align="left">Typically inserted en-route into an INVITE request by the proxy, the header is populated with the Request_URI received by the proxy in the request.  The header allows the User Agent Server (UAS) to identify which address-of-record the invitation was sent to, and can be used to render distinctive audio-visual alert notes based on the URI.</td></tr><tr><td align="left">PChargingFunctionAddressesHeader</td><td align="left">Contains a list of one or more of the Charging Collection Function (CCF) and the Event Charging Function (ECF) addresses.  The CCF and ECF addresses may be passed during the establishment of a dialog, or in a standalone transaction.</td></tr><tr><td align="left">PChargingVectorHeader</td><td align="left">Contains a unique charging identifier and correlation information, which is used by network operators to correctly charge for routing events through their networks.</td></tr><tr><td align="left"><a class="ulink" href="http://www.ietf.org/rfc/rfc3313.txt">PMediaAuthorizationHeader</a></td><td align="left">Contains one or more session-specific media authorization tokens, which are used for QoS of the media streams.</td></tr><tr><td align="left"><a class="ulink" href="http://www.ietf.org/rfc/rfc3325.txt">PPreferredIdentityHeader</a></td><td align="left">Contains a SIP URI and an optional display-name.  For example, "James May" &lt;sip:james@domain.com&gt;.  This header is used by trusted proxy servers to identify the user to other trusted proxies, and can be used to select the correct SIP URI in the case of multiple user identities.  </td></tr><tr><td align="left">PPreferredServiceHeader</td><td align="left">Used by the PAssertedService Header to determine the preferred user service.  Multiple PPreferreedService headers may be present in a single request.</td></tr><tr><td align="left"><a class="ulink" href="http://www.ietf.org/rfc/rfc5002.txt">PProfileKeyHeader</a></td><td align="left">Contains a key used by a proxy to query the user database for a given profile.  The key may contain wildcards that are used as part of the query into the database.</td></tr><tr><td align="left"><a class="ulink" href="http://www.ietf.org/rfc/rfc3323.txt">PrivacyHeader</a></td><td align="left">Contains values that determine whether particular header information is deemed as private by the UA for requests and responses.  </td></tr><tr><td align="left"><a class="ulink" href="http://www.ietf.org/rfc/rfc5502.txt">PServedUserHeader</a></td><td align="left">Contains an identity of the user that represents the served user.  The header is added to the initial requests for a dialog or standalone request, which are then routed between nodes in a trusted domain.</td></tr><tr><td align="left"><a class="ulink" href="http://www.ietf.org/rfc/rfc4457.txt">PUserDatabaseHeader</a></td><td align="left">Contains the address of the HSS handling the user that generated the request.  The header field is added to request routed from an Interrogating Call Session Control Function (I-CSCF) to a Serving Call Session Control Function (S-CSCF)</td></tr><tr><td align="left"><a class="ulink" href="http://www.ietf.org/rfc/rfc3455.txt">PVisitedNetworkIDHeader</a></td><td align="left">Contains the identifier of a visited network.  The identifier is a text string or token than it known by both the registrar or the home proxy at the home network, and the proxies in the visited network.</td></tr><tr><td align="left"><a class="ulink" href="http://www.ietf.org/rfc/rfc3329.txt">SecurityClientHeader, SecurityServerHeader, SecurityVerifyHeader</a></td><td align="left">Contains information used to negotiate the security mechanisms between a UAC, and other SIP entities including UAS, proxy and registrar.</td></tr><tr><td align="left"><a class="ulink" href="http://www.ietf.org/rfc/rfc3608.txt">ServiceRouteHeader</a></td><td align="left">Contains a route vector that will direct requests through a specified sequence of proxies.  The header may be included by a registrar in response to a REGISTER request.</td></tr><tr><td align="left"><a class="ulink" href="http://snad.ncsl.nist.gov/proj/iptel/jain-sip-1.2/javadoc/gov/nist/javax/sip/header/ims/WWWAuthenticateHeaderIms.html">WWWAuthenticateHeaderIms</a></td><td align="left">Extends the WWWAuthenticateResponse header functionality by defining an additional authorization parameter (auth-param).</td></tr></tbody></table></div></div><br class="table-break"/></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="jruby-telco-integration"/>7.8. JRuby/Rails Integration with Torquebox Telco Framework</h2></div></div></div><p>Mobicents Sip Servlets is compatible with  the <a class="ulink" href="http://torquebox.org/">Torquebox</a> Telco Framework  JRuby on
  Rails integration.  The framework allows you to create powerful, pure or converged VoIP JRuby
  on Rails applications.</p><p>JRuby features a powerful and well
  deployed scripting language that allows  you to modify your application at
  runtime (this is true even for the SIP and Media part that Mobicents SIP
  Servlets offer) without restarting the server.  In addition, TorqueBox is a new kind of Ruby application
  platform that integrates popular technologies such as Ruby-on-Rails, while
  extending the footprint of Ruby applications to include support for Job
  Scheduling, Task Queues, SOAP Handling, and other capabilities.</p><p>To obtain more information about building pure JRuby-Rails applications that 
  leverage Mobicents SIP Servlets SIP and mediat capabilities, refer to the <a class="ulink" href="http://torquebox.org/documentation/browse/LATEST/telecom.html">Torquebox User Documentation</a>.</p><p>Check this <a class="ulink" href="http://jeanderuelle.blogspot.com/2009/03/my-jruby-rails-app-on-jboss-can-make.html">blog post</a> to help you create your first pure Torquebox JRuby Telco
  application and our <a class="ulink" href="http://www.mobicents.org/mss-pure-jruby-telco.html">pure JRuby on Rails TorqueBox Telco example</a> showcasing this integration.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="ss_jslee_interop"/>7.9. SIP Servlets - JAIN SLEE Interoperability</h2></div></div></div><p>JAIN SLEE is a more complex specification than SIP Servlets, and it
  has been know as heavyweight and with a steep learning curve. However JAIN
  SLEE has standardized a high performing event driven application server, an
  execution environment with a good concurrency model and powerful protocol
  agnostic capabilities thus covering a variety of Telco protocols.</p><p>SIP Servlets on the other hand is much simpler and easier to get started
  with. Its focus is on extending the HTTP Servlets and Java EE hosting
  environments with SIP capabilities.  SIP Servlets is more of a SIP
  programming framework, while JSLEE is a complete, self sufficient application
  platform. The fact that SIP Servlets is focused on SIP and
  Java EE makes it a natural fit to build JEE converged applications.</p><div class="table"><a id="tab-ss_vs_jslee"/><p class="title"><b>Table 7.4. SIP Servlets / JAIN SLEE Comparison Table</b></p><div class="table-contents"><table summary="SIP Servlets / JAIN SLEE Comparison Table" border="1"><colgroup><col align="left"/><col align="left"/></colgroup><thead><tr><th align="center">SIP Servlets</th><th align="center">JAIN SLEE</th></tr></thead><tbody><tr><td colspan="2" align="center">
              <span class="bold"><strong>Application Architecture</strong></span>
            </td></tr><tr><td align="center">Based on HTTP Servlets. Unit of logic is the SIP Servlets</td><td align="center">Component based, Object Orientated architecture. Unit of logic is the Service Building Block</td></tr><tr><td align="center">Composition through Application Router</td><td align="center">Composition through parent-child relationship</td></tr><tr><td colspan="2" align="center">
              <span class="bold"><strong>Application State</strong></span>
            </td></tr><tr><td align="center">Servlets are stateless</td><td align="center">SBBs may be stateful.</td></tr><tr><td align="center">Shared state stored in a session and visible to all Servlets with access to the session</td><td align="center">SBB state is transacted and a property of the SBB itself. Shared state may be stored in a separate ActivityContext via a type safe interface</td></tr><tr><td colspan="2" align="center">
              <span class="bold"><strong>Concurrency Control</strong></span>
            </td></tr><tr><td align="center">Application managed : use of Java monitors</td><td align="center">System Managed : isolation of concurrent transactions</td></tr><tr><td colspan="2" align="center">
              <span class="bold"><strong>Facilities (Utilities for Applications)</strong></span>
            </td></tr><tr><td align="center">Timer, Listeners</td><td align="center">Timer, Trace, Alarm, Statistics, Profiles.</td></tr><tr><td colspan="2" align="center">
              <span class="bold"><strong>Protocol Support</strong></span>
            </td></tr><tr><td align="center">SIP and HTTP</td><td align="center">Protocol agnostic. Consistent event model, regardless of protocol/resource</td></tr><tr><td colspan="2" align="center">
              <span class="bold"><strong>Availability Mechanisms</strong></span>
            </td></tr><tr><td align="center">Container managed state (session object) that can be replicated</td><td align="center">Container managed state (SBB CMP, Facility, ActivityContext) that can be replicated</td></tr><tr><td align="center">No transaction context for SIP message processing</td><td align="center">Transaction context for event delivery</td></tr><tr><td align="center">Non transacted state operations</td><td align="center">Container managed state operations are transacted</td></tr><tr><td align="left">Facilities are non transacted</td><td align="left">Facilities, timers, are transacted</td></tr><tr><td align="center">No defined failure model</td><td align="center">Well defined and understood failure model via transactions</td></tr><tr><td colspan="2" align="center">
              <span class="bold"><strong>Management</strong></span>
            </td></tr><tr><td align="center">No standard management mechanisms defined</td><td align="center">JMX Interface for managing applications, life cycle, upgrades, ...</td></tr></tbody></table></div></div><p><br class="table-break"/></p><p>JSLEE and SIP Servlets target different audiences with different needs
  but they can be complementary in a number of real world cases.</p><p>SIP Servlets focuses on SIP and its integration with Java EE. It is
  also more of a SIP framework within Java EE while JSLEE is an event driven
  application server with protocol agnostic architecture, spanning any legacy
  or potential future protocols. SIP Servlets applications are generally
  simpler to implement and accelerate time to market for Web and SIP
  deployment scenarios. JSLEE has a steeper learning curve and covers a wider
  set of target deployment environments.</p><p>As JBoss is the only vendor to implement both specifications through
  Mobicents, this makes it a natural fit to build converged and interoperable
  JSLEE/SIP Servlets applications that are able to comply with standards in a
  portable manner, we built an application that could leverage standards all
  the way without resorting to vendor proprietary extensions by making SIP
  Servlets and JSLEE work together. <a class="ulink" href="http://mobicents.googlecode.com/files/deruelle-JSleeSipServletsInteroperability-final.pdf">Our "JSLEE and SIP-Servlets Interoperability with Mobicents Communication Platform" paper</a> describes our approach and the possible different
  approaches we have identified to achieve the goal of interoperability
  between SIP Servlets and JSLEE.</p><p>You can also use our <a class="ulink" href="http://www.mobicents.org/jslee-sips-interop-demo.html">JSLEE/SIP Servlets interoperability example</a> showcasing our approach.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="d0e8266"/>7.10. Eclipse IDE Tools</h2></div></div></div><p>The Mobicents SIP Servlets Eclipse Tools assist developers in creating JSR 289 applications with Mobicents. You can use the Dynamic Web Project wizard for Converged Applications to get started with an empty project and then you can test your application with a real SIP Phone right from the IDE.</p><div class="mediaobject"><img src="images/mss-ide-screen.png"/><div class="caption">SIP Servlets Eclipse IDE Tools</div></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e8276"/>7.10.1. Pre-Install requirements</h3></div></div></div><p>Eclipse 3.4 is required.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e8281"/>7.10.2. Installation</h3></div></div></div><p>The standard Eclipse Update Site installation mechanism is leveraged. The Mobicents Update Site is at the following location: <a class="ulink" href="http://mobicents.googlecode.com/svn/downloads/sip-servlets-eclipse-update-site">http://mobicents.googlecode.com/svn/downloads/sip-servlets-eclipse-update-site</a> After adding this update site to Eclipse you can proceed with regular Eclipse Plug-in Installation. If you need help the process is demonstrated in <a class="ulink" href="http://www.youtube.com/watch?v=LZOmLEC2IeQ">this video</a>.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e8292"/>7.10.3. SIP Servlets Core Plug-in</h3></div></div></div><p>This Plug-in allows you to create Dynamic Web Projects with  SIP Facet. There are a number of new Dynamic Web Project configurations for Converged applications. It's best to use the ones marked as "recommended". After you complete the wizards a complete converged project  skeleton will be generated. Working with this type of project is similar to working with normal Web projects. You can see a demo <a class="ulink" href="http://people.redhat.com/vralev/mss-eclipse-plugin-demo/mss-eclipse.htm">here</a>.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="d0e8300"/>7.10.4. SIP Phone Plug-in</h3></div></div></div><p>The SIP Phone plug-in integrates a SIP phone inside your Eclipse IDE. You can use the phone to test your SIP or Media applications. The Phone uses the Microphone and the Speakers on your computer and allows to simulate real-world scenarios.</p></div></div></div><ul class="docnav"><li class="previous"><a accesskey="p" href="emom-Enterprise-Monitoring-Operations-Management.html"><strong>Prev</strong>Chapter 6. Enterprise Monitoring and Management</a></li><li class="up"><a accesskey="u" href="#"><strong>Top of page</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Front page</strong></a></li><li class="next"><a accesskey="n" href="bp-Best_Practices.html"><strong>Next</strong>Chapter 8. Best Practices</a></li></ul></body></html>